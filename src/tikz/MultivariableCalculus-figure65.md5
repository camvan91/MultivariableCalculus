\begingroup \toks 0={macro:-> \par \begin {axis}[grid=major,view={270}{90},zmin=0, colormap/copper, xticklabels={,,}, yticklabels={,,}, zticklabels={,,}, name=plot0 ] \par \par \begin {scope}[opacity=.5] \addplot 3[surf, domain=-1:5, y domain=-3:3, shader=interp, opacity=1] {-(x-2)^2-y^2+20}; \end {scope} \par \addplot 3 [blue, domain=-1:5, y domain=-3:3, quiver={u={-2*x+4}, v={-2*y}, scale arrows=0.14, every arrow/.append style={-stealth}}, samples=10] (x,y,0) node[above] (A) {}; \par \foreach \z in {1,1.414,sqrt(3)} { \addplot 3[domain=-\z :\z , samples y=1, mygreen, thick, samples=200, smooth] ({sqrt(\z *\z -x^2)+2},{x},{0}); } \pgfplotsinvokeforeach {1,...,20} { \draw [thick, mypink] (2,0,0) ellipse[x radius=sqrt(##1), y radius=sqrt(##1)]; } \par \par \end {axis} \draw (plot0.south) node[below right] {$\nabla f$}; }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %
