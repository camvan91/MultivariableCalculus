\begingroup \toks 0={macro:->[ tangent/.style={ decoration={ markings,mark= at position ##1 with { \coordinate (tangent point-\pgfkeysvalueof {/pgf/decoration/mark info/sequence number}) at (0pt,0pt); \coordinate (tangent unit vector-\pgfkeysvalueof {/pgf/decoration/mark info/sequence number}) at (1,0pt); \coordinate (tangent orthogonal unit vector-\pgfkeysvalueof {/pgf/decoration/mark info/sequence number}) at (0pt,1); } }, postaction=decorate }, use tangent/.style={ shift=(tangent point-##1), x=(tangent unit vector-##1), y=(tangent orthogonal unit vector-##1) }, use tangent/.default=1 ] \begin {axis}[ name=plot1, anchor=origin, disabledatascaling, xmin=-1,xmax=4, ymin=-1,ymax=2, x=1cm,y=1cm, grid=both, grid style={line width=.1pt, draw=gray!10}, axis lines=middle, minor tick num=0, enlargelimits={abs=0.5}, axis line style={latex-latex}, xlabel={$x$}, ylabel={$y$}, xlabel style={at={(ticklabel* cs:1)},anchor=west}, ylabel style={at={(ticklabel* cs:1)},anchor=south} ] \par \pgfplotsinvokeforeach {-2,...,6} { \addplot [color=myorange, densely dashed, thick, domain=-3:5] ({##1},{x}); } \pgfplotsinvokeforeach {-1.5,...,6} { \addplot [color=myorange, dotted, thin, domain=-3:5] ({##1},{x}); } \par \par \par \par \end {axis} \par \par \draw [tangent=.0, tangent=.2, tangent=.4, tangent=.6, tangent=.8,tangent=.99,mypink, thick] (.5,.5) to[curve through={(2,0) .. (1.7,1)}] (4,2); \foreach \i in {1, ..., 6} { \draw [use tangent=\i , -stealth, blue] (0,0) -- (.7,0); } \draw [draw=none, fill=black] (.5,.5) circle (1.5pt) node[right] {$\vec a$}; \draw [draw=none, fill=black] (4,2) circle (1.5pt) node[right] {$\vec b$}; \draw [draw=none, fill=black] (1,2.5) node[above, myorange] {$\dd x$ ruler}; \par }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %
