\begingroup \toks 0={macro:-> \par \par \begin {axis}[grid=major,view={80}{25},zmin=0,xmin=-2,xmax=2,ymin=-2,ymax=2, colormap/viridis, xticklabels={,,}, yticklabels={,,}, zticklabels={,,}, name=plot0 ] \par \par \addplot 3[domain=-180:179, samples y=1, mypink, thick, smooth, densely dashed] ({cos(x)},{sin(x)},{0}) node[near start, right, mypink, xshift=.1cm] {}; \par \addplot 3 [myorange, domain=-2:2, quiver={u={-1*sign(y)*sqrt(abs(y))}, v={sign(x)*sqrt(abs(x))}, scale arrows=0.24, every arrow/.append style={-stealth}}, samples=10] (x,y,0) node[above] (A) {}; \par \par \par \addplot 3[surf, domain=-2:2, shader=interp, opacity=1, samples=20] {(x-2)^2+(y-3)^2}; \par \par \par \par \foreach \h in {2.9, 4.9, ..., 40} { \pgfmathsetmacro \start {270 - acos(1/sqrt(\h )) - 1} \addplot 3[domain=\start :270, samples y=1, white, thin, smooth, samples=150, restrict y to domain=-2:2, restrict x to domain=-2:2] ({(sqrt(\h )*cos(x)+2)},{(sqrt(\h )*sin(x)+3)},{\h }); } \par \addplot 3[domain=0:360, samples y=1, mypink, thick, smooth] ({cos(x)},{sin(x)},{(cos(x)-2)^2+(sin(x)-3)^2}); \par \end {axis} \par \begin {axis}[grid=major,view={90}{90},zmin=0,xmin=-2,xmax=2,ymin=-2,ymax=2,zmax=45, xshift=.5cm, colormap/viridis, xticklabels={,,}, yticklabels={,,}, zticklabels={,,}, name=plot2, at=(plot0.right of south east), ] \par \addplot 3[surf, domain=-2:2, shader=interp, opacity=1, samples=20] {(x-2)^2+(y-3)^2}; \par \par \par \par \foreach \h in {2.9, 4.9, ..., 40} { \pgfmathsetmacro \start {270 - acos(1/sqrt(\h ))} \addplot 3[domain=\start :270, samples y=1, white, thin, smooth] ({(sqrt(\h )*cos(x)+2)},{(sqrt(\h )*sin(x)+3)},{\h }); } \par \addplot 3 [myorange, domain=-2:2, quiver={u={-1*sign(y)*sqrt(abs(y))}, v={sign(x)*sqrt(abs(x))}, scale arrows=0.24, every arrow/.append style={-stealth}}, samples=10] (x,y,0) node[above] (A) {}; \par \draw ({cos(deg(4.12))}, {sin(deg(4.12))}, {(cos(deg(4.12))-2)^2+(sin(deg(4.12))-3)^2}) node (A) {}; \draw ({cos(deg(4.2+pi))}, {sin(deg(4.2+pi))}, {(cos(deg(4.2+pi))-2)^2+(sin(deg(4.2+pi))-3)^2}) node (B) {}; \par \par \addplot 3[domain=0:360, samples y=1, mypink, thick, smooth] ({cos(x)},{sin(x)},{(cos(x)-2)^2+(sin(x)-3)^2}); \par \end {axis} \par \par \draw (plot2.north) node[above, yshift=.2cm] {$\nabla f(\vec a)\cdot \vec T(\vec a)=0$} edge[bend right, ->,black,thick] (A) edge[bend left, ->,thick] (B); }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %
