\begingroup \toks 0={macro:->[scale=3,tdplot_main_coords] \par \coordinate (O) at (0,0,0); \par \tdplotsetcoord {P}{\rvec }{\thetavec }{\phivec } \par \par \draw [thick,->] (0,0,0) -- (1,0,0) node[anchor=north east]{$x$}; \draw [thick,->] (0,0,0) -- (0,1,0) node[anchor=north west]{$y$}; \draw [thick,->] (0,0,0) -- (0,0,1) node[anchor=south]{$z$}; \par \tdplotdrawarc {(O)}{0.2}{0}{\phivec }{anchor=north}{$\theta $}; \par \tdplotsetthetaplanecoords {\phivec } \par \par \draw [tdplot_rotated_coords] (0,0,0) arc (0:-90:-.4) node (X) {}; \draw [tdplot_rotated_coords, mypink, ultra thick] (0,0,0) arc (0:360:-.4); \par \par \draw [dashed, color=lightgray] (Pxy) -- (X); \draw [dashed, color=lightgray] (O) -- (Pxy); \par \tdplotsetthetaplanecoords {30} \draw [tdplot_rotated_coords, myorange, ultra thin] (0,0,0) arc (0:360:-.4); \tdplotsetthetaplanecoords {90} \draw [tdplot_rotated_coords, myorange, ultra thin] (0,0,0) arc (0:360:-.4); \tdplotsetthetaplanecoords {120} \draw [tdplot_rotated_coords, myorange, ultra thin] (0,0,0) arc (0:360:-.4); \tdplotsetthetaplanecoords {150} \draw [tdplot_rotated_coords, myorange, ultra thin] (0,0,0) arc (0:360:-.4); \tdplotsetthetaplanecoords {180} \draw [tdplot_rotated_coords, myorange, ultra thin] (0,0,0) arc (0:360:-.4); }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %
