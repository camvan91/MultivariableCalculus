\begingroup \toks 0={macro:-> \par \par \begin {axis}[grid=major,view={-30}{15},zmin=0, colormap/copper ] \addplot 3[surf, domain=-1:5, y domain=-3:3, shader=interp, opacity=.5] {(x-2)^2+y^2}; \pgfmathsetmacro {\d }{-50} \pgfmathsetmacro {\xx }{cos(\d )} \pgfmathsetmacro {\yy }{sin(\d )} \par \def \xcoord (##1){(##1)*cos(\d )} \def \ycoord (##1){(##1)*sin(\d )} \def \zcoord (##1){(\xcoord {##1}-2)^2+(\ycoord {##1})^2} \par \pgfmathsetmacro {\zz }{(cos(\d )-2)^2+sin(\d )^2} \draw [->, mypink, thick] (0,0,0) -- ({cos(\d )},{sin(\d )},0) node[midway, below] {$\alpha \vec u$}; \par \addplot 3[domain=-2:3.85, samples y=1, white] ({x*cos(\d )},{x*sin(\d )},{(x*cos(\d )-2)^2+(x*sin(\d ))^2}); \par \par \par \draw [densely dashed, thick] (0,0,0) -- (0,0,4) node[] (A) {}; \draw [densely dashed, thick] (\xx ,\yy ,0) -- (\xx ,\yy , {(\xx - 2)^2+(\yy )^2}) node[] (B) {}; \end {axis} \draw (-1,0) node {$g(\vec 0)$} edge[bend left, ->, white, ultra thick] node[] {} (A) edge[bend left, ->,black] node[] {} (A); \draw (3,-1) node {$g(\alpha \vec u)$} edge[bend right, ->, white, ultra thick] node[] {} ([xshift=.5pt, yshift=-1.5pt]B) edge[bend right, ->] node[] {} (B); \par }\xdef \tikzexternallastkey {\the \toks 0 }\endgroup %
